import{r as a,h as t,H as e,g as o}from"./p-a23b3d3a.js";import"./p-112455b1.js";import"./p-db605274.js";import"./p-6005e86e.js";import{E as s,M as i,c as p,F as l,L as n}from"./p-1ef6431f.js";import"./p-e908516f.js";import"./p-a1835bb8.js";import{s as b,t as r}from"./p-bb447120.js";import{s as c}from"./p-5846b063.js";import{t as y}from"./p-6b1b37da.js";var u,d=function(a,t,e,o){var s,i=arguments.length,p=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(a,t,e,o);else for(var l=a.length-1;l>=0;l--)(s=a[l])&&(p=(i<3?s(p):i>3?s(t,e,p):s(t,e))||p);return i>3&&p&&Object.defineProperty(t,e,p),p};!function(a){a[a.play=0]="play",a[a.pause=1]="pause",a[a.stop=2]="stop"}(u||(u={}));const h=class{constructor(t){a(this,t),this.isPlaying=!1,this.activeState=u.pause,this.isDisabled=!1,this.hasTopLevelKeyboardControls=!1}componentWillLoad(){const{Events:a}=window.MusicKit;this.musicKit&&(this.eventListeners=b([[a.playbackStateDidChange,this.handleUpdateState],[a.nowPlayingItemDidChange,this.handleUpdateState],[a.queueItemsDidChange,this.updateDisabled]],this.musicKit,this),this.updateButtonState(),this.updateDisabled())}disconnectedCallback(){r(this.eventListeners,this.musicKit)}updateButtonState(){var a;let t=u.play;this.musicKit.isPlaying&&(t=(null===(a=this.musicKit.nowPlayingItem)||void 0===a?void 0:a.isLiveRadioStation)?u.stop:u.pause),this.activeState=t}updateDisabled(){const{queue:a,nowPlayingItem:t}=this.musicKit;this.isDisabled=!(t||a&&0!==(null==a?void 0:a.length))}async togglePlay(){if(!this.isDisabled)switch(this.activeState){case u.pause:await this.musicKit.pause(),this.metrics.dispatchMetricsMediaEvent(s.TRIGGER_PAUSE);break;case u.stop:await this.musicKit.stop();break;case u.play:default:await this.musicKit.play(),this.metrics.dispatchMetricsMediaEvent(s.TRIGGER_PLAY)}}favorKeyboardControls(a){if(this.hasTopLevelKeyboardControls&&" "===a.key)return a.stopImmediatePropagation(),!1}handleUpdateState(){this.updateButtonState(),this.updateDisabled()}renderButtonContent(){switch(this.activeState){case u.pause:return y("MediaComponents.Playback.Pause");case u.stop:return y("MediaComponents.Playback.Stop");case u.play:default:return y("MediaComponents.Playback.Play")}}render(){return t(e,{class:{"playback-controls-play":!0,[this.layoutClass]:!0}},t("button",{class:"playback-play__play",disabled:this.isDisabled,"aria-hidden":c(this.activeState!==u.play),tabIndex:this.activeState===u.play?void 0:-1},t("slot",{name:"play"},t("amp-icon",{name:"play"})),t("span",{class:"button__label"},this.renderButtonContent())),t("button",{class:"playback-play__pause","aria-hidden":c(this.activeState!==u.pause),tabIndex:this.activeState===u.pause?void 0:-1},t("slot",{name:"pause"},t("amp-icon",{name:"pause"})),t("span",{class:"button__label"},this.renderButtonContent())),t("button",{class:"playback-play__stop","aria-hidden":c(this.activeState!==u.stop),tabIndex:this.activeState===u.stop?void 0:-1},t("slot",{name:"stop"},t("amp-icon",{name:"stop"})),t("span",{class:"button__label"},this.renderButtonContent())))}get el(){return o(this)}};d([i()],h.prototype,"musicKit",void 0),d([p()],h.prototype,"metrics",void 0),d([l],h.prototype,"el",void 0),d([n],h.prototype,"layoutClass",void 0),h.style='.playback-controls-play{width:32px;height:28px;display:flex;flex:0 0 auto;align-items:stretch;justify-content:stretch;position:relative}button.playback-play__play,button.playback-play__pause,button.playback-play__stop{position:relative;transition:transform 0.2s ease-out;margin:0;padding:0;display:inline-block;border:0;background-color:transparent;outline:none;cursor:pointer;-webkit-appearance:none;appearance:none;font-family:inherit;font-size:inherit;line-height:inherit;width:100%;height:100%;position:absolute;top:0;left:0;color:var(--vibrantPrimary);transition:color 0.2s ease-out}button.playback-play__play:enabled:active,button.playback-play__pause:enabled:active,button.playback-play__stop:enabled:active{transform:scale(0.9)}button.playback-play__play:enabled:active::before,button.playback-play__pause:enabled:active::before,button.playback-play__stop:enabled:active::before{width:38px;height:38px;opacity:0.2}button.playback-play__play::before,button.playback-play__pause::before,button.playback-play__stop::before{content:"";width:32px;height:32px;display:block;position:absolute;z-index:-1;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;background:#000;transition:all 0.2s ease-out;opacity:0}@media (prefers-color-scheme: dark){button.playback-play__play::before,button.playback-play__pause::before,button.playback-play__stop::before{background:#fff}}button.playback-play__play::-moz-focus-inner,button.playback-play__pause::-moz-focus-inner,button.playback-play__stop::-moz-focus-inner{border:0}button.playback-play__play[data-focus-method=key]:focus,button.playback-play__pause[data-focus-method=key]:focus,button.playback-play__stop[data-focus-method=key]:focus{outline:2px solid currentColor;outline-offset:2px}button.playback-play__play amp-icon,button.playback-play__pause amp-icon,button.playback-play__stop amp-icon{width:100%;height:100%;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}button.playback-play__play[aria-hidden=true],button.playback-play__pause[aria-hidden=true],button.playback-play__stop[aria-hidden=true]{opacity:0;pointer-events:none}button.playback-play__play:disabled,button.playback-play__pause:disabled,button.playback-play__stop:disabled{color:var(--vibrantTertiary)}.button__label{width:0;height:0;overflow:hidden;clip:rect(0, 0, 0, 0);position:absolute}';export{h as amp_playback_controls_play}